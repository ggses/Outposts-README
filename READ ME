# Outposts Plugin

A comprehensive outpost capture system for Minecraft 1.21.5 servers. Compatible with both **Spigot** and **Paper** (Paper recommended for optimal performance).

## üè∞ Features

### Core System
- **Outpost Creation & Management**: Easy setup using WorldEdit selections with automatic WorldGuard region creation
- **Advanced Capture System**: Players can attack and capture outposts with configurable timers and cooldowns
- **Smart Cooldown Management**: Robust cooldown system with proper cleanup and admin controls
- **Visual Progress Tracking**: Boss bar progress indicators with customizable colors and styles

### Loot & Rewards
- **Flexible Loot System**: Customizable loot with individual drop chances for each item
- **Vanilla & Custom Items**: Full support for both Minecraft items and ItemsAdder custom items
- **Protected Loot Chests**: Automatic chest protection with smart item management
- **Dynamic Loot Distribution**: Items are randomly placed in chest slots for variety

### Combat & Challenges
- **Mob Wave System**: Spawn challenging mobs at specific capture progress percentages
- **Configurable Difficulty**: Customize mob types, counts, and spawn timing per outpost
- **Sentinel Integration**: Support for custom NPC mobs during wave events
- **Combat Effects**: Immersive sound effects and particle systems

### Integration & Compatibility
- **PlaceholderAPI Support**: Full placeholder integration for other plugins and displays
- **Map Integration**: BlueMap and Dynmap markers with customizable icons and descriptions
- **Multi-Plugin Support**: Optional integrations with ItemsAdder, Sentinel, and map plugins
- **Permission System**: Granular permissions for different user roles

## üìã Requirements

### Required Dependencies
- **WorldEdit** (7.3.0+) - For region selection and management
- **WorldGuard** (7.0.9+) - For region protection and flags
- **PlaceholderAPI** (2.11.5+) - For placeholder integration and display

### Optional Dependencies
- **ItemsAdder** (3.6.1+) - For custom loot items and enhanced gameplay
- **Sentinel** - For spawning custom NPC mobs during capture waves
- **BlueMap** - For displaying outpost markers on 3D web maps
- **Dynmap** - For displaying outpost markers on 2D web maps

## üöÄ Installation

1. **Download** the plugin JAR file from releases
2. **Install Dependencies**: Ensure WorldEdit, WorldGuard, and PlaceholderAPI are installed
3. **Place Plugin**: Put the JAR file in your server's `plugins/` folder
4. **Start Server**: Start or restart your server to generate configuration files
5. **Configure**: Edit `plugins/Outposts/config.yml` and `outposts.yml` as needed
6. **Create Outposts**: Use `/oup create` command to set up your first outpost

## üéÆ Commands

### Player Commands (No Permissions Required)
- `/outposts attack` or `/oup attack` - Attack and capture the current outpost
- `/outposts list` or `/oup list` - View all outposts with their current status
- `/outposts help` or `/oup help` - Display help information

### Admin Commands (Requires Permissions)
- `/oup create <name> <capture_time> <cooldown>` - Create a new outpost from WorldEdit selection
- `/oup delete <name>` - Permanently delete an existing outpost
- `/oup endcooldown <name>` - Instantly end an outpost's cooldown period
- `/oup forcecapture <name>` - Force complete capture of an outpost (admin override)
- `/oup forcecooldown <name> [time]` - Force an outpost into cooldown state
- `/oup addloot <outpost> <amount> [chance]` - Add held item to outpost loot table
- `/oup reload` - Reload all plugin configurations

> **‚ö†Ô∏è Important**: Using `/oup addloot` may overwrite manually configured loot in `outposts.yml`

## üîê Permissions

### Basic Permissions
- `outposts.use` - Basic plugin usage (default: true)
- `outposts.attack` - Attack and capture outposts (default: true)
- `outposts.list` - List outposts and their status (default: true)

### Admin Permissions
- `outposts.admin` - All administrative commands (default: op)
- `outposts.create` - Create new outposts (default: op)
- `outposts.delete` - Delete existing outposts (default: op)
- `outposts.endcooldown` - End outpost cooldowns (default: op)
- `outposts.forcecapture` - Force capture outposts (default: op)
- `outposts.forcecooldown` - Force cooldown on outposts (default: op)
- `outposts.addloot` - Add loot to outposts (default: op)
- `outposts.reload` - Reload plugin configuration (default: op)

## üèóÔ∏è Creating Your First Outpost

### Step-by-Step Guide
1. **Select Area**: Use WorldEdit to select the outpost region (`//wand`, then left/right click)
2. **Create Outpost**: Run `/oup create <name> <capture_time> <cooldown>`
   - `name`: Unique identifier for your outpost
   - `capture_time`: Seconds required to capture (e.g., 60)
   - `cooldown`: Seconds before outpost becomes available again (e.g., 300)
3. **Place Chest**: You'll receive a special chest - place it inside the region within 60 seconds
4. **Configure**: Edit `outposts.yml` to customize loot, waves, and other settings
5. **Test**: Use `/oup list` to verify the outpost was created successfully

### What Happens Automatically
- WorldGuard region creation with protection flags
- Basic outpost configuration setup
- Vertical region expansion (if enabled in config)
- Chest location registration and protection

## ‚öôÔ∏è Configuration

### Main Config (`config.yml`)
Contains global settings, default values, and message templates:

```yaml
# Global defaults for new outposts
defaultCaptureTime: 60
defaultCooldown: 300

# Visual settings
useBossbar: true
bossbarColor: GREEN
lootChestType: CHEST

# Region settings
autoExpandY: true

# Message settings
showEnterMessage: true
enterDisplayType: CHAT

# Customizable messages for all plugin interactions
messages:
  notInOutpost: "&4‚öî &cYou are not inside a capturable outpost."
  # ... more messages
```

### Outposts Config (`outposts.yml`)
Defines individual outposts with their specific settings:

```yaml
my-fortress:
  region: "outpost_my_fortress"
  displayName: "&6&lMy Fortress"
  captureTime: 90
  cooldown: 600
  
  # Loot configuration
  loot:
    0:
      material: "DIAMOND"
      amount: 3
      chance: 75
    1:
      material: "ITEMSADDER:custom_sword"
      amount: 1
      chance: 25
  
  # Wave configuration
  waves:
    0:
      percent: 25
      mobs:
        - "ZOMBIE:5"
        - "SKELETON:3"
```

## üìä PlaceholderAPI Integration

### Available Placeholders
- `%outposts_current%` - Name of outpost at player's location (or "NONE")
- `%outposts_cooldown_<name>%` - Cooldown remaining for specific outpost (seconds)
- `%outposts_status_<name>%` - Current status: READY/CAPTURING/COOLDOWN
- `%outposts_progress_<name>%` - Capture progress percentage (0.0-100.0)

### Usage Examples
```yaml
# In scoreboard or other plugins
- "Current Outpost: %outposts_current%"
- "Fortress Status: %outposts_status_fortress%"
- "Cooldown: %outposts_cooldown_fortress%s"
```

## üó∫Ô∏è Map Integration

### BlueMap Setup
1. Install BlueMap plugin
2. Add to outpost configuration:
```yaml
map:
  showOnBlueMap: true
  bluemapIcon: "castle"
  bluemapDescription: "Capturable fortress with valuable rewards"
  markerColor: "#FF6B35"
```
3. Reload plugin with `/oup reload`

### Dynmap Setup
Similar configuration with `showOnDynmap: true` and `dynmapIcon` settings.

## üéÅ Loot System

### Supported Item Types
```yaml
loot:
  # Vanilla Minecraft items
  0:
    material: "DIAMOND"
    amount: 2
    chance: 50
  
  # ItemsAdder custom items
  1:
    material: "ITEMSADDER:namespace:item_id"
    amount: 1
    chance: 25
  
  # Enchanted items (basic support)
  2:
    material: "IRON_SWORD"
    amount: 1
    chance: 40
```

### Loot Mechanics
- Items are randomly distributed in chest slots
- Each item has independent drop chance calculation
- Players can only take items from outpost chests, not place them
- Invalid items are automatically handled without crashes

## ‚öîÔ∏è Combat System

### Mob Waves
Configure challenging encounters at different capture stages:

```yaml
waves:
  # Early wave (25% progress)
  0:
    percent: 25
    mobs:
      - "ZOMBIE:3"
      - "SKELETON:2"
  
  # Mid-game challenge (50% progress)
  1:
    percent: 50
    mobs:
      - "CREEPER:1"
      - "SPIDER:4"
      - "SENTINEL:guard_npc"  # Requires Sentinel plugin
  
  # Final wave (75% progress)
  2:
    percent: 75
    mobs:
      - "IRON_GOLEM:1"
      - "ZOMBIE:5"
```

### Wave Mechanics
- Mobs spawn randomly within configured radius of chest
- Multiple waves can trigger at the same progress percentage
- Sentinel NPCs supported for advanced encounters
- Smart spawn location finding (ground level, safe positions)




## üîÑ Version Compatibility

- **Minecraft Version**: 1.21.5
- **Server Software**: Spigot 1.21.5+ and Paper 1.21.5+ (Paper recommended)
- **Java Version**: 17 or higher
- **API Version**: 1.21

## üêõ Troubleshooting

### Common Issues

**Outpost not working after creation**
- Ensure WorldEdit selection was made before `/oup create`
- Verify chest was placed within 60 seconds
- Check that WorldGuard region was created successfully

**Cooldown not working properly**
- Plugin now includes robust cooldown management
- Use `/oup endcooldown <name>` to manually reset if needed
- Check server logs for any error messages

**Loot not appearing**
- Verify chest location is set correctly
- Check loot configuration syntax in `outposts.yml`
- Ensure ItemsAdder items exist if using custom items

**PlaceholderAPI not working**
- Confirm PlaceholderAPI is installed and enabled
- Use `/papi reload` after installing Outposts
- Check placeholder syntax matches documentation



---

**Made with ‚ù§Ô∏è for the Minecraft community**
